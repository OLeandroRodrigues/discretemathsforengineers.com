<aside>
  <nav aria-label="Main navigation">
    <div class="nav-section">
      <div class="nav-label" data-i18n="core">Core</div>

      <details class="menu" data-menu="graphs">
        <summary class="menu-title">
          <div class="menu-left">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <line x1="20" y1="18" x2="44" y2="28" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <line x1="20" y1="18" x2="30" y2="46" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <line x1="44" y1="28" x2="30" y2="46" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <circle cx="20" cy="18" r="7" fill="currentColor"/>
                <circle cx="44" cy="28" r="7" fill="currentColor"/>
                <circle cx="30" cy="46" r="7" fill="currentColor"/>
              </svg>
            </div>
            <div class="menu-text">
              <strong data-i18n="graphs">Graph Theory</strong>
            </div>
          </div>
          <div class="chev" aria-hidden="true">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 18L15 12L9 6" stroke="#EAEAEA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>
        <div class="submenu">
          <a class="series-item" href="/en/pages/graphs/foundations/part-1.html">
            <span class="submenu-title">01 — Foundations</span>
            <span class="submenu-meta">11 parts</span>
          </a>
           <a class="series-item" href="/en/pages/graphs/hamiltonian/part-1.html">
            <span class="submenu-title">02 — Hamiltonian</span>
            <span class="submenu-meta">4 parts</span>
          </a>
          <a class="series-item" href="/en/pages/graphs/computational-representation/part-1.html">                                              
            <span class="submenu-title">03 — Computational Representation of Graphs</span>
            <span class="submenu-meta">3 parts</span>
          </a>
        </div>
      </details>
      <details class="menu" data-menu="algorithm-design">
        <summary class="menu-title">
          <div class="menu-left">
            <div class="icon" aria-hidden="true">
              <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <line x1="20" y1="18" x2="44" y2="28" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <line x1="20" y1="18" x2="30" y2="46" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <line x1="44" y1="28" x2="30" y2="46" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <circle cx="20" cy="18" r="7" fill="currentColor"/>
                <circle cx="44" cy="28" r="7" fill="currentColor"/>
                <circle cx="30" cy="46" r="7" fill="currentColor"/>
              </svg>
            </div>
            <div class="menu-text">
              <strong data-i18n="algorithm-design">Algorithm Design</strong>
            </div>
          </div>
          <div class="chev" aria-hidden="true">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 18L15 12L9 6" stroke="#EAEAEA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </summary>

        <div class="submenu">
          <a class="series-item" href="/en/pages/algorithm-design/search/part-1.html">
            <span class="submenu-title">Search</span>
          </a>
        </div>
    </details>
    </div>
    <div class="nav-section">
    <div class="nav-label">More</div>
    <details class="menu" data-menu="about">
      <summary class="menu-title">
        <div class="menu-left">
          <div class="icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 17V11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 8H12.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
              <path d="M12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22Z"
                    stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="menu-text">
            <strong>About</strong>
          </div>
        </div>
        <div class="chev" aria-hidden="true">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 18L15 12L9 6" stroke="#EAEAEA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </summary>
      <div class="submenu">
        <a class="series-item" href="/en/pages/about/vision.html">
          <span class="submenu-title">Vision</span>
          <span class="submenu-meta">why this exists</span>
        </a>
      </div>
    </details>
  </div>

  </nav>

  <div class="sidebar-footer">
    <span>© <span id="year"></span> <span data-i18n="siteName">Discrete Maths for Engineers</span></span>
  </div>
</aside>
<script>
  (function () {
    const KEY = "nav.activeMenu";

    function norm(p){ return (p || "").replace(/\/$/, ""); }

    const menus = Array.from(document.querySelectorAll('details.menu[data-menu]'));
    if (!menus.length) {
      document.documentElement.classList.remove("nav-preload");
      return;
    }

    function closeOthers(openMenu){
      menus.forEach(m => { if (m !== openMenu) m.open = false; });
    }

    const currentPath = norm(location.pathname);
    let matched = null;

    for (const menu of menus) {
      const links = menu.querySelectorAll(".submenu a[href]");
      for (const a of links) {
        const url = new URL(a.getAttribute("href"), location.origin);
        if (norm(url.pathname) === currentPath) { matched = menu; break; }
      }
      if (matched) break;
    }

    const saved = localStorage.getItem(KEY);
    const fallback = saved
      ? document.querySelector(`details.menu[data-menu="${CSS.escape(saved)}"]`)
      : null;

    const toOpen = matched || fallback;
    if (toOpen) {
      toOpen.open = true;
      closeOthers(toOpen);
    }

    document.documentElement.classList.remove("nav-preload");
  })();
</script>
